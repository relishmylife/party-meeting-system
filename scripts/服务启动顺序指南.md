# å…šç»„ç»‡ç”Ÿæ´»ä¼šè®®ç®¡ç†ç³»ç»Ÿ - æœåŠ¡å¯åŠ¨é¡ºåºæŒ‡å—

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

- **æ–‡æ¡£åç§°**: æœåŠ¡å¯åŠ¨é¡ºåºæŒ‡å—

## ğŸ¯ æ¦‚è¿°

æœ¬æŒ‡å—è¯¦ç»†è¯´æ˜äº†å…šç»„ç»‡ç”Ÿæ´»ä¼šè®®ç®¡ç†ç³»ç»Ÿçš„å®Œæ•´æœåŠ¡å¯åŠ¨é¡ºåºï¼ŒåŒ…æ‹¬å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„ä¸åŒå¯åŠ¨æµç¨‹ã€‚éµå¾ªæ­£ç¡®çš„å¯åŠ¨é¡ºåºå¯ä»¥ç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œå’Œæ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

### æ ¸å¿ƒç»„ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯åº”ç”¨       â”‚    â”‚   åå‘ä»£ç†       â”‚    â”‚   åç«¯æœåŠ¡       â”‚
â”‚   (React/Vite)  â”‚â”€â”€â”€â–¶â”‚   (Nginx)       â”‚â”€â”€â”€â–¶â”‚   (Supabase)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   é™æ€èµ„æº       â”‚    â”‚   SSLè¯ä¹¦       â”‚    â”‚   Edge Functionsâ”‚
â”‚   (CSS/JS)      â”‚    â”‚   (Let's Encrypt)â”‚    â”‚   (æ•°æ®åº“æ“ä½œ)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æœåŠ¡ä¾èµ–å…³ç³»

```
ç³»ç»Ÿå¯åŠ¨é¡ºåº (ä»ä¸‹åˆ°ä¸Š):
1. æ“ä½œç³»ç»Ÿ (Linux)
2. ç½‘ç»œæœåŠ¡ (DNS/é˜²ç«å¢™)
3. åŸºç¡€è½¯ä»¶ (Node.js/Nginx)
4. ç³»ç»ŸæœåŠ¡ (Nginx/PM2)
5. åº”ç”¨æœåŠ¡ (Reactå¼€å‘æœåŠ¡å™¨)
6. æ•°æ®åº“æœåŠ¡ (Supabase - å¤–éƒ¨)
7. ç›‘æ§æœåŠ¡ (æ—¥å¿—/å¥åº·æ£€æŸ¥)
```

## ğŸ”„ å¯åŠ¨æ¨¡å¼åˆ†ç±»

### 1. å¼€å‘æ¨¡å¼ (Development Mode)
- **ç›®æ ‡**: æœ¬åœ°å¼€å‘ã€æµ‹è¯•ã€è°ƒè¯•
- **ç»„ä»¶**: Node.jså¼€å‘æœåŠ¡å™¨ + çƒ­é‡è½½
- **ç«¯å£**: 5173 (Viteé»˜è®¤)
- **ç‰¹ç‚¹**: å¿«é€Ÿå¯åŠ¨ã€å®æ—¶æ›´æ–°ã€è¯¦ç»†æ—¥å¿—

### 2. ç”Ÿäº§æ¨¡å¼ (Production Mode)
- **ç›®æ ‡**: æ­£å¼éƒ¨ç½²ã€ç”¨æˆ·è®¿é—®
- **ç»„ä»¶**: Nginx + é™æ€æ–‡ä»¶ + åå‘ä»£ç†
- **ç«¯å£**: 80 (HTTP) / 443 (HTTPS)
- **ç‰¹ç‚¹**: é«˜æ€§èƒ½ã€å®‰å…¨åŠ å›ºã€ç¼“å­˜ä¼˜åŒ–

### 3. æ··åˆæ¨¡å¼ (Hybrid Mode)
- **ç›®æ ‡**: å¼€å‘é¢„è§ˆ + ç”Ÿäº§æœåŠ¡
- **ç»„ä»¶**: Nginx + å¼€å‘æœåŠ¡å™¨å¹¶å­˜
- **ç«¯å£**: 80/443 + 5173
- **ç‰¹ç‚¹**: åŒæ—¶æ”¯æŒå¼€å‘å’Œç”Ÿäº§è®¿é—®

## ğŸ“‹ è¯¦ç»†å¯åŠ¨é¡ºåº

### å¼€å‘æ¨¡å¼å¯åŠ¨é¡ºåº

#### ç¬¬ä¸€é˜¶æ®µ: ç¯å¢ƒå‡†å¤‡ (1-2åˆ†é’Ÿ)

**æ­¥éª¤1: ç³»ç»Ÿæ£€æŸ¥**
```bash
# æ£€æŸ¥æ“ä½œç³»ç»Ÿ
uname -a
cat /etc/os-release

# æ£€æŸ¥æƒé™
whoami  # ç¡®ä¿æœ‰sudoæƒé™

# æ£€æŸ¥ç½‘ç»œ
ping -c 3 google.com
```

**æ­¥éª¤2: ä¾èµ–æ£€æŸ¥**
```bash
# æ£€æŸ¥Node.jsç‰ˆæœ¬
node --version  # éœ€è¦ >= 16.0.0

# æ£€æŸ¥åŒ…ç®¡ç†å™¨
npm --version
pnpm --version  # æ¨è

# æ£€æŸ¥ç³»ç»Ÿå·¥å…·
which nginx curl wget git
```

**æ­¥éª¤3: ç«¯å£æ£€æŸ¥**
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep :5173
netstat -tlnp | grep :3000

# å¦‚æœ‰å†²çªï¼Œç»ˆæ­¢å ç”¨è¿›ç¨‹
sudo kill -9 <PID>
```

#### ç¬¬äºŒé˜¶æ®µ: ä¾èµ–å®‰è£… (2-5åˆ†é’Ÿ)

**æ­¥éª¤4: å®‰è£…é¡¹ç›®ä¾èµ–**
```bash
cd /workspace/party-meeting-system

# æ¸…ç†æ—§ä¾èµ– (å¯é€‰)
rm -rf node_modules pnpm-lock.yaml

# å®‰è£…ä¾èµ–
pnpm install --prefer-offline
# æˆ–ä½¿ç”¨ npm
npm install --prefer-offline
```

**æ­¥éª¤5: ç¯å¢ƒå˜é‡æ£€æŸ¥**
```bash
# æ£€æŸ¥ç¯å¢ƒæ–‡ä»¶
ls -la .env*

# æ£€æŸ¥Supabaseé…ç½®
cat src/lib/supabase.ts | grep -E "(url|key)"
```

#### ç¬¬ä¸‰é˜¶æ®µ: æœåŠ¡å¯åŠ¨ (1-2åˆ†é’Ÿ)

**æ­¥éª¤6: å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm run dev
# æˆ–
npm run dev

# åå°å¯åŠ¨
pnpm run dev &
```

**æ­¥éª¤7: éªŒè¯æœåŠ¡çŠ¶æ€**
```bash
# æ£€æŸ¥è¿›ç¨‹
ps aux | grep -E "(vite|node)"
netstat -tlnp | grep :5173

# æµ‹è¯•è¿æ¥
curl http://localhost:5173
```

### ç”Ÿäº§æ¨¡å¼å¯åŠ¨é¡ºåº

#### ç¬¬ä¸€é˜¶æ®µ: æœåŠ¡å™¨å‡†å¤‡ (3-5åˆ†é’Ÿ)

**æ­¥éª¤1: ç³»ç»Ÿæƒé™æ£€æŸ¥**
```bash
# ç¡®ä¿rootæƒé™
sudo whoami

# æ›´æ–°ç³»ç»ŸåŒ…
sudo apt update && sudo apt upgrade -y

# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h
```

**æ­¥éª¤2: å®‰è£…ç³»ç»Ÿè½¯ä»¶**
```bash
# å®‰è£…Nginx
sudo apt install -y nginx

# å®‰è£…Node.js (å¦‚æœéœ€è¦)
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# å®‰è£…pnpm
npm install -g pnpm
```

#### ç¬¬äºŒé˜¶æ®µ: åº”ç”¨å‡†å¤‡ (2-4åˆ†é’Ÿ)

**æ­¥éª¤3: éƒ¨ç½²åº”ç”¨æ–‡ä»¶**
```bash
cd /workspace/party-meeting-system

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm run build:prod

# åˆ›å»ºéƒ¨ç½²ç›®å½•
sudo mkdir -p /var/www/party-system

# å¤åˆ¶æ„å»ºæ–‡ä»¶
sudo cp -r dist/* /var/www/party-system/
sudo chown -R www-data:www-data /var/www/party-system
sudo chmod -R 755 /var/www/party-system
```

#### ç¬¬ä¸‰é˜¶æ®µ: æœåŠ¡é…ç½® (3-5åˆ†é’Ÿ)

**æ­¥éª¤4: é…ç½®Nginx**
```bash
# åˆ›å»ºNginxé…ç½®
sudo tee /etc/nginx/sites-available/party-system > /dev/null << 'EOF'
server {
    listen 80;
    server_name localhost party.imust.edu.cn;
    
    root /var/www/party-system;
    index index.html;
    
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    location /api/ {
        proxy_pass https://lfmpvxczahvcselayyho.supabase.co/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
EOF

# å¯ç”¨ç«™ç‚¹
sudo ln -sf /etc/nginx/sites-available/party-system /etc/nginx/sites-enabled/

# æµ‹è¯•é…ç½®
sudo nginx -t
```

#### ç¬¬å››é˜¶æ®µ: æœåŠ¡å¯åŠ¨ (1-2åˆ†é’Ÿ)

**æ­¥éª¤5: å¯åŠ¨æœåŠ¡**
```bash
# å¯åŠ¨å¹¶å¯ç”¨Nginx
sudo systemctl start nginx
sudo systemctl enable nginx

# æ£€æŸ¥çŠ¶æ€
sudo systemctl status nginx
sudo nginx -t
```

**æ­¥éª¤6: é˜²ç«å¢™é…ç½® (å¯é€‰)**
```bash
# å¼€æ”¾å¿…è¦ç«¯å£
sudo ufw allow 80
sudo ufw allow 443
sudo ufw allow 22

# å¯ç”¨é˜²ç«å¢™
sudo ufw enable
```

#### ç¬¬äº”é˜¶æ®µ: å¥åº·æ£€æŸ¥ (1åˆ†é’Ÿ)

**æ­¥éª¤7: å…¨é¢æ£€æŸ¥**
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status nginx
ps aux | grep nginx

# æµ‹è¯•Webè®¿é—®
curl -I http://localhost
curl -I http://party.imust.edu.cn  # å¦‚æœåŸŸåå·²é…ç½®

# æ£€æŸ¥é”™è¯¯æ—¥å¿—
sudo tail -20 /var/log/nginx/error.log
sudo tail -20 /var/log/nginx/access.log
```

## ğŸ”§ ä¸€é”®å¯åŠ¨è„šæœ¬ä½¿ç”¨

### ä½¿ç”¨è¯´æ˜

**åŸºæœ¬ç”¨æ³•:**
```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /workspace/party-meeting-system

# ç”Ÿäº§æ¨¡å¼å¯åŠ¨ (æ¨è)
sudo bash start-all-services.sh

# å¼€å‘æ¨¡å¼å¯åŠ¨
sudo bash start-all-services.sh dev

# æŸ¥çœ‹å¸®åŠ©
sudo bash start-all-services.sh --help
```

### è„šæœ¬åŠŸèƒ½ç‰¹ç‚¹

- âœ… **è‡ªåŠ¨åŒ–ç¨‹åº¦é«˜**: ä¸€é”®å¯åŠ¨ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®
- âœ… **é”™è¯¯å¤„ç†å®Œå–„**: è‡ªåŠ¨æ£€æµ‹é”™è¯¯å¹¶æä¾›è§£å†³æ–¹æ¡ˆ
- âœ… **æ—¥å¿—è®°å½•å®Œæ•´**: æ‰€æœ‰æ“ä½œéƒ½æœ‰è¯¦ç»†æ—¥å¿—
- âœ… **å¥åº·æ£€æŸ¥æœºåˆ¶**: å¯åŠ¨åè‡ªåŠ¨éªŒè¯æœåŠ¡çŠ¶æ€
- âœ… **å¤šæ¨¡å¼æ”¯æŒ**: æ”¯æŒå¼€å‘å’Œç”Ÿäº§ä¸¤ç§æ¨¡å¼
- âœ… **å®‰å…¨æ£€æŸ¥**: è‡ªåŠ¨æ£€æŸ¥æƒé™ã€ä¾èµ–ã€ç«¯å£ç­‰

### è„šæœ¬æ‰§è¡Œæµç¨‹

```
start-all-services.sh æ‰§è¡Œæµç¨‹:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æƒé™æ£€æŸ¥        â”‚ â”€â”€â–¶ è¦æ±‚sudoæƒé™
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¾èµ–æ£€æŸ¥        â”‚ â”€â”€â–¶ æ£€æŸ¥Node.js/Nginxç­‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç«¯å£æ£€æŸ¥        â”‚ â”€â”€â–¶ æ£€æŸ¥80/443/5173ç«¯å£
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabaseæ£€æŸ¥    â”‚ â”€â”€â–¶ éªŒè¯åç«¯æœåŠ¡å¯ç”¨æ€§
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¾èµ–å®‰è£…        â”‚ â”€â”€â–¶ å®‰è£…é¡¹ç›®ä¾èµ–
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”Ÿäº§æ¨¡å¼        â”‚    â”‚  å¼€å‘æ¨¡å¼        â”‚
â”‚  æ„å»ºåº”ç”¨        â”‚    â”‚  å¯åŠ¨å¼€å‘æœåŠ¡å™¨  â”‚
â”‚  é…ç½®Nginx       â”‚    â”‚  ç»‘å®šç«¯å£5173    â”‚
â”‚  éƒ¨ç½²é™æ€æ–‡ä»¶     â”‚    â”‚  å¯ç”¨çƒ­é‡è½½      â”‚
â”‚  å¯åŠ¨Nginx       â”‚    â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¥åº·æ£€æŸ¥        â”‚    â”‚  å¥åº·æ£€æŸ¥        â”‚
â”‚  éªŒè¯æœåŠ¡çŠ¶æ€     â”‚    â”‚  éªŒè¯æœåŠ¡çŠ¶æ€     â”‚
â”‚  æµ‹è¯•Webè®¿é—®      â”‚    â”‚  æµ‹è¯•å¼€å‘è®¿é—®     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¯åŠ¨å®Œæˆ        â”‚    â”‚  å¯åŠ¨å®Œæˆ        â”‚
â”‚  æ˜¾ç¤ºæœåŠ¡ä¿¡æ¯     â”‚    â”‚  æ˜¾ç¤ºæœåŠ¡ä¿¡æ¯     â”‚
â”‚  æä¾›ç®¡ç†å‘½ä»¤     â”‚    â”‚  æä¾›ç®¡ç†å‘½ä»¤     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âš ï¸ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### 1. æƒé™é—®é¢˜

**é—®é¢˜**: "Permission denied" æˆ– "Operation not permitted"

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ç¡®ä¿æœ‰sudoæƒé™
sudo whoami

# ä¿®å¤æ–‡ä»¶æƒé™
sudo chown -R $USER:$USER /workspace/party-meeting-system
sudo chmod +x start-all-services.sh

# å¦‚æœéœ€è¦rootæƒé™æ‰§è¡Œ
sudo bash start-all-services.sh
```

### 2. ç«¯å£å ç”¨

**é—®é¢˜**: "Address already in use" (ç«¯å£è¢«å ç”¨)

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
sudo netstat -tlnp | grep :80
sudo lsof -i :80

# ç»ˆæ­¢å ç”¨è¿›ç¨‹
sudo kill -9 <PID>

# æˆ–è€…æ›´æ”¹ç«¯å£é…ç½®
# ç¼–è¾‘ /etc/nginx/sites-available/party-system
# å°† listen 80; æ”¹ä¸º listen 8080;
```

### 3. ä¾èµ–å®‰è£…å¤±è´¥

**é—®é¢˜**: npm/pnpm install å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ¸…ç†ç¼“å­˜
npm cache clean --force
pnpm store prune

# åˆ é™¤node_modulesé‡æ–°å®‰è£…
rm -rf node_modules package-lock.json pnpm-lock.yaml
npm install
# æˆ–
pnpm install

# ä½¿ç”¨æ·˜å®é•œåƒ (å›½å†…ç”¨æˆ·)
npm config set registry https://registry.npmmirror.com
pnpm config set registry https://registry.npmmirror.com
```

### 4. Nginxé…ç½®é”™è¯¯

**é—®é¢˜**: nginx -t æµ‹è¯•å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
sudo nginx -T | less

# æ£€æŸ¥è¯­æ³•é”™è¯¯
sudo nginx -t

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
sudo tail -50 /var/log/nginx/error.log

# é‡æ–°åˆ›å»ºé…ç½®æ–‡ä»¶
sudo cp /etc/nginx/sites-available/default /etc/nginx/sites-available/party-system
sudo nano /etc/nginx/sites-available/party-system
```

### 5. Supabaseè¿æ¥é—®é¢˜

**é—®é¢˜**: åç«¯æœåŠ¡ä¸å¯ç”¨

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æµ‹è¯•Supabaseè¿æ¥
curl -I https://lfmpvxczahvcselayyho.supabase.co/rest/v1/

# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping lfmpvxczahvcselayyho.supabase.co
nslookup lfmpvxczahvcselayyho.supabase.co

# æ£€æŸ¥é˜²ç«å¢™
sudo ufw status
sudo iptables -L
```

### 6. æ„å»ºå¤±è´¥

**é—®é¢˜**: pnpm run build å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥TypeScripté”™è¯¯
npx tsc --noEmit

# æ¸…ç†æ„å»ºç¼“å­˜
rm -rf dist node_modules/.vite

# æ›´æ–°ä¾èµ–
pnpm update

# æ£€æŸ¥ç¯å¢ƒå˜é‡
cat .env* 2>/dev/null || echo "æ— ç¯å¢ƒå˜é‡æ–‡ä»¶"
```

## ğŸ” æœåŠ¡ç›‘æ§ä¸ç»´æŠ¤

### å¯åŠ¨åæ£€æŸ¥æ¸…å•

- [ ] NginxæœåŠ¡è¿è¡Œæ­£å¸¸ (`systemctl status nginx`)
- [ ] Webé¡µé¢å¯ä»¥æ­£å¸¸è®¿é—® (`curl http://localhost`)
- [ ] APIä»£ç†å·¥ä½œæ­£å¸¸ (`curl http://localhost/api/`)
- [ ] æ²¡æœ‰é”™è¯¯æ—¥å¿— (`sudo tail /var/log/nginx/error.log`)
- [ ] é™æ€æ–‡ä»¶å¯è®¿é—® (`curl http://localhost/assets/`)
- [ ] SSLè¯ä¹¦æœ‰æ•ˆ (å¦‚æœæ˜¯HTTPS)

### æ—¥å¸¸ç»´æŠ¤å‘½ä»¤

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sudo systemctl status nginx

# é‡å¯æœåŠ¡
sudo systemctl restart nginx

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
sudo tail -f /var/log/nginx/access.log
sudo tail -f /var/log/nginx/error.log

# æ£€æŸ¥ç£ç›˜ä½¿ç”¨
df -h
du -sh /var/www/party-system

# æ£€æŸ¥å†…å­˜ä½¿ç”¨
free -h
ps aux | grep nginx

# æµ‹è¯•ç½‘ç«™å“åº”
curl -w "@curl-format.txt" -o /dev/null -s http://localhost
```

### æ€§èƒ½ç›‘æ§

```bash
# å®‰è£…ç›‘æ§å·¥å…·
sudo apt install -y htop iotop

# ç›‘æ§ç³»ç»Ÿèµ„æº
htop

# ç›‘æ§ç£ç›˜I/O
iotop

# æ£€æŸ¥nginxè¿›ç¨‹
ps aux | grep nginx

# æŸ¥çœ‹nginxçŠ¶æ€
curl http://localhost/nginx_status
```

## ğŸ“Š å¯åŠ¨æ€§èƒ½æŒ‡æ ‡

### æœŸæœ›å¯åŠ¨æ—¶é—´

| æ¨¡å¼ | ç»„ä»¶ | é¢„è®¡æ—¶é—´ | å®é™…æ—¶é—´ |
|------|------|----------|----------|
| å¼€å‘æ¨¡å¼ | ä¾èµ–æ£€æŸ¥ | 30ç§’ | ~30ç§’ |
| å¼€å‘æ¨¡å¼ | ä¾èµ–å®‰è£… | 2åˆ†é’Ÿ | ~2åˆ†é’Ÿ |
| å¼€å‘æ¨¡å¼ | æœåŠ¡å™¨å¯åŠ¨ | 10ç§’ | ~10ç§’ |
| ç”Ÿäº§æ¨¡å¼ | ç³»ç»Ÿå‡†å¤‡ | 3åˆ†é’Ÿ | ~3åˆ†é’Ÿ |
| ç”Ÿäº§æ¨¡å¼ | åº”ç”¨æ„å»º | 2åˆ†é’Ÿ | ~2åˆ†é’Ÿ |
| ç”Ÿäº§æ¨¡å¼ | æœåŠ¡é…ç½® | 3åˆ†é’Ÿ | ~3åˆ†é’Ÿ |
| ç”Ÿäº§æ¨¡å¼ | å¯åŠ¨éªŒè¯ | 1åˆ†é’Ÿ | ~1åˆ†é’Ÿ |

### ç³»ç»Ÿèµ„æºè¦æ±‚

| ç¯å¢ƒ | CPU | å†…å­˜ | ç£ç›˜ | ç½‘ç»œ |
|------|-----|------|------|------|
| å¼€å‘ | 1æ ¸ | 2GB | 10GB | 10Mbps |
| ç”Ÿäº§ | 1æ ¸ | 1GB | 5GB | 100Mbps |
| é«˜è´Ÿè½½ | 2æ ¸ | 4GB | 20GB | 1Gbps |

## ğŸš€ è‡ªåŠ¨åŒ–éƒ¨ç½²

### CI/CDé›†æˆ

å¯ä»¥å°†å¯åŠ¨è„šæœ¬é›†æˆåˆ°CI/CDæµç¨‹ä¸­:

```yaml
# .github/workflows/deploy.yml
name: Deploy Party System

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          
      - name: Install dependencies
        run: npm install -g pnpm && pnpm install
        
      - name: Build application
        run: pnpm run build:prod
        
      - name: Deploy to server
        run: |
          rsync -avz --delete dist/ user@server:/var/www/party-system/
          ssh user@server "sudo systemctl restart nginx"
```

### å®¹å™¨åŒ–éƒ¨ç½²

å¯ä»¥ä½¿ç”¨Dockerè¿›è¡Œå®¹å™¨åŒ–éƒ¨ç½²:

```dockerfile
# Dockerfile
FROM node:18-alpine as builder

WORKDIR /app
COPY package*.json ./
RUN npm install -g pnpm && pnpm install

COPY . .
RUN pnpm run build:prod

FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf

EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

## ğŸ“ æ›´æ–°æ—¥å¿—

| ç‰ˆæœ¬ | æ—¥æœŸ | æ›´æ–°å†…å®¹ |
|------|------|----------|
| v1.0 | 2025-12-01 | åˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å«å®Œæ•´çš„å¯åŠ¨é¡ºåºæŒ‡å— |

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·:

1. **æŸ¥çœ‹æ—¥å¿—**: æ£€æŸ¥ `/var/log/party-system/startup.log`
2. **è¿è¡Œè¯Šæ–­**: ä½¿ç”¨è„šæœ¬çš„å¥åº·æ£€æŸ¥åŠŸèƒ½
3. **æŸ¥çœ‹æ–‡æ¡£**: å‚è€ƒæœ¬æ–‡æ¡£çš„å¸¸è§é—®é¢˜éƒ¨åˆ†
4. **è”ç³»æ”¯æŒ**: è®°å½•è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œæ“ä½œæ­¥éª¤

---

**æ³¨æ„**: æœ¬æŒ‡å—ä¼šéšç€ç³»ç»Ÿæ›´æ–°è€ŒæŒç»­æ”¹è¿›ï¼Œå»ºè®®å®šæœŸæŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬ã€‚
